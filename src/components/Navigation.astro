---
import data from "../../data";
import Burger from "./Burger.astro";
import home from "../../assets/images/home.svg";
import SocialIcon from "./SocialIcon.astro";
---

<div id="navigation">
  <Burger />
  <nav
    class="z-10 fixed lg:relative lg:bg-transparent h-0 lg:h-auto overflow-hidden lg:overflow-visible transition-all top-0 left-0 right-0 bottom-0 whitespace-nowrap"
  >
    <ul
      id="navigation-menu"
      class="flex p-3 mt-20 lg:p-0 lg:mt-0 lg:items-center flex-col lg:flex-row text-lg lg:text-base items-start"
    >
      {
        data.navigations.map((nav) => {
          if (nav.isHome) {
            return (
              <li class="flex flex-col group relative mx-4">
                <a href="/" class="w-6 h-6 inline-flex object-cover">
                  <img
                    src={home.src}
                    width={home.width}
                    height={home.height}
                    alt="Accueil"
                    class="hidden lg:inline"
                  />
                  <span class="inline lg:hidden">Accueil</span>
                </a>
              </li>
            );
          }
          return (
            <li class="flex flex-col group relative mx-4 my-2 lg:my-0 w-full">
              <a
                href={nav.link}
                title={nav.label}
                class="flex items-center group-hover:text-primary-700 py-2 lg:py-1"
              >
                {nav.subMenu && (
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="hidden lg:block text-primary-600"
                  >
                    <path d="M12 14.975q-.2 0-.387-.075q-.188-.075-.313-.2l-4.6-4.6q-.275-.275-.275-.7q0-.425.275-.7q.275-.275.7-.275q.425 0 .7.275l3.9 3.9l3.9-3.9q.275-.275.7-.275q.425 0 .7.275q.275.275.275.7q0 .425-.275.7l-4.6 4.6q-.15.15-.325.212q-.175.063-.375.063Z" />
                  </svg>
                )}
                {nav.label}
              </a>
              {nav.subMenu && (
                <ul class="group-hover:flex lg:shadow-xl lg:hidden lg:bg-slate-50 flex-col lg:absolute lg:mt-7 ml-3 p-3">
                  {nav.subMenu.map((sub) => {
                    return (
                      <li class="lg:px-3 py-2 lg:py-1">
                        <a
                          href={sub.link}
                          title={sub.label}
                          class="lg:whitespace-nowrap"
                        >
                          {sub.label}
                        </a>
                      </li>
                    );
                  })}
                </ul>
              )}
            </li>
          );
        })
      }
    </ul>
    <div class="flex justify-center mt-20 lg:hidden">
      {
        data.socials.map((s) => (
          <a href="{s.link}" title={s.label} target="_blank" class="mx-3">
            <SocialIcon name={s.icon} />
          </a>
        ))
      }
    </div>
  </nav>
</div>
<style>
  #navigation.is-open > nav {
    @apply h-screen max-h-screen bg-slate-50;
  }
</style>
